<div class="controller-view">
    <div class="block-company-statistics">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12 no-padding">
                    <div class="statistics-outer">
                        <div class="col-lg-12 return-on-report-page">
                            <a href="#/reports"
                               class="hidden-xs hidden-sm"
                               style="position: relative;">
                                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="12px" height="12px"
                     viewBox="0 0 3.069 3.418" style="enable-background:new 0 0 3.069 3.418;" xml:space="preserve">
                <path class="st0" d="M0.055,1.843L0.048,1.835L0.045,1.832L0.041,1.827L0.037,1.821C0.031,1.815,0.027,1.807,0.023,1.8l-0.001,0
                    L0.019,1.792L0.017,1.786C0.013,1.778,0.01,1.77,0.008,1.762L0.006,1.758L0.003,1.742L0.001,1.725L0,1.713V1.704v0l0.001-0.011
                    l0.002-0.017l0.003-0.017l0.002-0.002C0.01,1.648,0.013,1.639,0.017,1.632l0.002-0.006l0.003-0.007l0.001-0.001
                    C0.027,1.61,0.031,1.604,0.037,1.597l0.004-0.005l0.004-0.005l0.003-0.003l0.007-0.008L0.06,1.571l1.516-1.516
                    c0.074-0.074,0.194-0.074,0.268,0c0.074,0.074,0.074,0.195,0,0.269L0.649,1.519h2.23c0.104,0,0.189,0.085,0.189,0.19
                    c0,0.104-0.085,0.19-0.189,0.19h-2.23l1.194,1.194c0.074,0.075,0.074,0.195,0,0.269c-0.074,0.074-0.194,0.074-0.268,0L0.055,1.843
                    L0.055,1.843z M0,1.713L0,1.713V1.709V1.704V1.713L0,1.713z"/>
            </svg>
                                {{"go back to reports menu"|translate}}
                            </a>
                        </div>
                        <div class="row header" style="clear: both">
                            <div class="col-lg-6">
                                <h4>{{'Users statistics for'| translate}} <span id="searchText">{{'all time'| translate}}</span></h4>
                                <i class="fa fa-info-circle tooltip-icon" title="" tooltip-placement="bottom-left" tooltip-class="tooltip-outer" uib-tooltip-html="$root.tooltips.statisticTooltip" aria-hidden="true"></i>
                            </div>
                            <div class="col-lg-4 col-lg-offset-2 text-right links pull-right">
                                <div class="">
                                    <span class="all-time" ng-click="changeParOfSearch('Forever')" ng-class="{'active': activeSearchName == 'Forever'}">
                                       {{'all_time'|translate}}
                                   </span>
                                </div>
                                <div class="">
                                   <span class="dateOptionsYearMonthWeek" ng-class="{'active': activeSearchName == 'week'}">
                                       {{'week'|translate}}
                                   </span>
                                </div>
                                <div class=" month">
                                    <span class="my_widget" ng-class="{'active': activeSearchName == 'month'}">
                                       {{'month'|translate}}
                                   </span>
                                </div>
                                <div class=" years">
                                    <select class="form-control bigLetter" ng-class="{'active': activeSearchName == 'year'}" ng-model="year" ng-change="changeToYear(year)">
                                        <option value="" ng-click="changeToYear(2017)">{{'year'|translate}}</option>
                                        <option ng-repeat="year in years" value="{{year}}" ng-click="changeToYear(year)">{{year}}</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <table ng-table="tableParams" class="table statistics" template-pagination="custom/pager"
                               loader-directive loading="loaders" loader-name="statistics">
                            <thead>
                            <tr>
                                <th>
                                    <table width="100%">
                                        <tr>
                                            <td>№<i class="fa fa-sort" aria-hidden="true"></i></td>
                                        </tr>
                                    </table>
                                </th>
                                <th ng-click="tableParams.sorting({'firstName': tableParams.isSortBy('firstName', 'asc') ? 'desc' : 'asc'})">
                                    <table width="100%">
                                        <tr>
                                            <td>{{'user' | translate}}<i class="fa fa-sort" aria-hidden="true"></i></td>
                                        </tr>
                                    </table>
                                </th>
                                <th ng-click="tableParams.sorting({'candidateCreatorStat.count': tableParams.isSortBy('candidateCreatorStat.count', 'asc') ? 'desc' : 'asc'})">
                                    <table width="100%">
                                        <tr>
                                            <td>{{'candidate_added' | translate}} <i class="fa fa-sort" aria-hidden="true"></i></td>
                                        </tr>
                                        <tr ng-if="candWithoutContacts != 'loaded'">
                                            <td ng-click="$event.stopPropagation();candidatesWithoutContacts()"><a>{{'No name/contacts' | translate}}</a></td>
                                        </tr>
                                        <tr ng-if="candWithoutContacts == 'loaded'">
                                            <td ng-click="$event.stopPropagation();candidatesWithoutContacts()"><a>{{'all_candidates' | translate}}</a></td>
                                        </tr>
                                    </table>
                                </th>
                                <th ng-click="tableParams.sorting({'vacancyCreatedInterview.count': tableParams.isSortBy('vacancyCreatedInterview.count', 'asc') ? 'desc' : 'asc'})">
                                    <table width="100%">
                                        <tr>
                                            <td>{{'interviews' | translate}}<i class="fa fa-sort" aria-hidden="true"></i></td>
                                        </tr>
                                    </table>
                                </th>
                                <th ng-click="tableParams.sorting({'vacancyCreatorStat.count': tableParams.isSortBy('vacancyCreatorStat.count', 'asc') ? 'desc' : 'asc'})">
                                    <table width="100%">
                                        <tr>
                                            <td colspan="3">{{'vacancies'|translate}} <i class="fa fa-sort" aria-hidden="true"></i></td>
                                        </tr>
                                        <tr>
                                            <td width="33%">
                                                <span>{{'history_info.Added1'|translate}}</span>
                                            </td>
                                            <td width="33%">
                                                <span>{{'In work'|translate}}</span>
                                            </td>
                                            <td width="33%">
                                                {{'Closed'|translate}}
                                            </td>
                                        </tr>
                                    </table>
                                </th>
                                <th ng-click="tableParams.sorting({'vacancyResponsibleCompletedTimeStat.count': tableParams.isSortBy('vacancyResponsibleCompletedTimeStat.count', 'asc') ? 'desc' : 'asc'})">
                                    <table width="100%">
                                        <tr>
                                            <td>{{'vacancies_filling_time'|translate}}<i class="fa fa-sort" aria-hidden="true"></i></td>
                                        </tr>
                                    </table>
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="person in $data">
                                <td class="table-page">{{(tableParams.page() - 1) *
                                    tableParams.count() + $index + 1}}</td>
                                <td sortable="firstName" class="name">
                                    <a href="">
                                        <!--<img src="images/sprite/testprofile.png" class="img-circle" width="30" height="30">-->
                                        <div class="responsible-initials">
                                            <span>{{getFirstLetters(person.firstName + ' ' + person.lastName)}}</span>
                                        </div>
                                        <a href="#/users/{{person.userId}}">
                                            {{person.firstName}}
                                            {{person.lastName}}
                                        </a>
                                    </a>
                                </td>
                                <td data-title="'Candidate added'" sortable="candidateCreatorStat.count">
                                    <strong ng-if="candWithoutContacts != 'loaded'">{{person.candidateCreatorStat.count}}</strong>
                                    <span class="small-font" ng-if="candWithoutContacts != 'loaded'">{{person.candidateCreatorPercent}}</span>
                                    <strong class="" ng-if="person.addedCandidatesWithoutNameOrContacts && candWithoutContacts == 'loaded'">{{person.addedCandidatesWithoutNameOrContacts}}</strong>
                                    <span class="small-font" ng-if="person.percentOfAddedCandidatesWithoutNameOrContacts && candWithoutContacts == 'loaded'">{{person.percentOfAddedCandidatesWithoutNameOrContacts}}</span>
                                    <strong class="" ng-if="!person.addedCandidatesWithoutNameOrContacts && candWithoutContacts == 'loaded'">0</strong>
                                    <span class="small-font" ng-if="!person.percentOfAddedCandidatesWithoutNameOrContacts && candWithoutContacts == 'loaded'">0%</span>
                                </td>
                                <td>
                                    <strong>{{person.vacancyCreatedInterview.count}}</strong>
                                    <span class="small-font">{{person.vacancyCreatedInterviewPercent}}</span>
                                </td>
                                <td>
                                    <table width="100%">
                                        <tr>
                                            <td width="33%">
                                                <strong>{{person.vacancyCreatorStat.count}}</strong>
                                                <span class="small-font">{{person.vacancyCreatorStatPercent}}</span>
                                            </td>
                                            <td width="33%">
                                                <strong class="pull-right second-value" ng-if="person.vacancyResponsibleInWorkStat">{{person.vacancyResponsibleInWorkStat}}</strong>
                                                <strong class="pull-right second-value" ng-if="!person.vacancyResponsibleInWorkStat">0</strong>
                                            </td>
                                            <td width="33%">
                                                <strong>{{person.vacancyResponsibleCompletedStat.count}}</strong>
                                                <span class="small-font">{{person.vacancyResponsibleCompletedStatPercent}}</span>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                                <td sortable="vacancyResponsibleCompletedTimeStat.count">
                                    <span ng-if="person.vacancyResponsibleCompletedTimeStat.count">{{person.vacancyResponsibleCompletedTimeStat.count|dayFormat}}</span>
                                    <span ng-if="!person.vacancyResponsibleCompletedTimeStat.count">&#8212;</span>
                                    <!--<strong>-->
                                        <!--31-->
                                    <!--</strong>-->
                                    <!--д.-->
                                    <!--<strong>-->
                                        <!--1-->
                                    <!--</strong>-->
                                    <!--ч.-->
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>