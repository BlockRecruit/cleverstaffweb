<div class="block-vacancy">
    <div class="breadcrumbs">
        <ol class="breadcrumb hidden-xs hidden-sm">
            <li><a href="#/vacancies">{{'vacancies'|translate}}</a></li>
            <li class="active">{{vacancy.position}}</li>
        </ol>
    </div>
    <h3>
        {{vacancy.position}},
        <a class="image-link"  ng-href="#/clients/{{vacancy.clientId.localId}}">
            <img ng-show="vacancy.clientId.logoId" ng-src="{{serverAddress}}/getapp?id={{vacancy.clientId.logoId}}&d={{$root.me.personId}}" alt=""/>
        </a>
        <a ng-href="#/clients/{{vacancy.clientId.localId}}" class="link">{{vacancy.clientId.name}}</a>
        <a href="#/vacancy/edit/{{vacancy.localId}}" class="link hidden-xs">
            <i class="fa fa-pencil" aria-hidden="true"></i>
            {{'Edit'|translate}}
        </a>
        <!--<a href="#/vacancy/edit/{{vacancy.localId}}" class="btn btn-primary">-->
            <!--{{'edit'|translate}}-->
        <!--</a>-->
        <a ng-show="currentTab == 'candidate'" type="button" ng-click="toAddCandidateForm(null, false, false)" class="btn btn-primary">
            {{'add_candidate' | translate}}
        </a>
    </h3>
    <div class="clearfix"></div>

    <div class="container-fluid nav-vacancy">
        <div>
            <ul class="nav navbar-nav">
                <li class="dropdown pull-left">
                    <a class=""
                       ng-click="VacanciesInfCandidTaskHistClientFunc('information')"
                       ng-class="{'selected' : currentTab == 'information'}">{{'information'|translate}}</a>
                </li>
                <li class="pull-left">
                    <a ng-click="VacanciesInfCandidTaskHistClientFunc('candidate')"
                       ng-class="{'selected' : currentTab == 'candidate'}">
                        {{'candidates'|translate}}
                           <span class="counter">
                              {{numberAllCandidateInVacancy}}
                           </span>
                    </a>
                </li>
                <li class="pull-left">
                    <a ng-click="VacanciesInfCandidTaskHistClientFunc('task') "
                       ng-class="{'selected' : currentTab == 'task'}">
                        {{'Tasks'|translate}}
                            <span class="counter">
                               {{totalTasksNumber}}
                           </span>
                    </a>
                </li>
                <li class="pull-left">
                    <a ng-click="VacanciesInfCandidTaskHistClientFunc('history')"
                       ng-class="{'selected' : currentTab == 'history'}">
                        {{'history'|translate}}
                    </a>
                </li>
                <li ng-show="$root.hideTariff && $root.me.recrutRole != 'client' && $root.me.recrutRole != 'salesmanager'" class="hidden-xs pull-left">
                    <a ng-click="VacanciesInfCandidTaskHistClientFunc('settings')"
                       ng-class="{'selected' : currentTab == 'settings'}">
                        {{'Email templates vacancy' | translate}}
                    </a>
                </li>
                <li class="pull-left">
                    <button id="disabledBtn-2" ng-click="$root.disabledBtnFunc();" ng-show="!$root.hideTariff && $root.me.recrutRole != 'client'"
                            type="button" class="btn btn-default disabled">
                        {{'Email templates vacancy' | translate}}
                    </button>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right hidden-sm hidden-xs">
                <li class="dropdown" ng-show="$root.hideTariff && $root.me.recrutRole != 'researcher' && $root.me.recrutRole != 'salesmanager'" >
                    <a class="" ng-click="goToReportPage()">{{'Vacancy report' | translate}}</a>
                </li>
                <button id="disabledBtn" ng-click="$root.disabledBtnFunc();" ng-show="!$root.hideTariff" type="button" class="btn btn-default disabled">{{'Vacancy report' | translate}}</button>
            </ul>
        </div>
    </div>
    <div ng-show="currentTab == 'information'">
        <div class="row main-info block-vacancy-descr">
            <div class="col-lg-7">
                <div class="upper-info col-lg-12">
                    <div class="col-lg-6">
                        <a ng-click="showRegion2Map = !showRegion2Map" ng-show="vacancy.region.displayFullName">
                            <i class="fa fa-map-marker" aria-hidden="true"></i>
                            {{vacancy.region.displayFullName}}
                        </a>
                        <a ng-show="(vacancy.salaryFrom || vacancy.salaryTo) && ($root.me.personParams.hideSalariesVacancy==undefined ||$root.me.personParams.hideSalariesVacancy=='N') && ($root['me']['recrutRole'] != 'client')" class="item">
                            <i class="fa fa-usd" aria-hidden="true"></i>
                            {{vacancy.salaryFrom|salaryFormat:vacancy.salaryTo | numberSpacing}}
                            <span ng-show="vacancy.salaryFrom || vacancy.salaryTo">{{vacancy.currency}}</span>
                        </a>
                        <a ng-show="vacancy.experience" class="item experience">
                            <span class="title">{{'experience'|translate}}:</span>
                            <span>{{vacancy.experience}}</span>
                        </a>
                        <a ng-show="vacancy.employmentType" class="item">
                            <span class="title">{{'employment_type'|translate}}:</span>
                            <span>
                                {{'employment_type_assoc.' + vacancy.employmentType|translate}}
                            </span>
                        </a>
                        <a ng-show="vacancy.dateFinish" class="item">
                            <span class="title">{{'deadline'|translate}}:</span>
                            <span>{{vacancy.dateFinish|dateFormat}}</span>
                        </a>
                        <a ng-show="vacancy.budget" class="item">
                            <span class="title">{{'budget'|translate}}:</span>
                            <span>{{vacancy.budget}}</span>
                        </a>
                        <a ng-show="vacancy.datePayment" class="item">
                            <span class="title">{{'payment'|translate}}:</span>
                            <span>{{vacancy.datePayment | dateFormat}}</span>
                        </a>
                        <a class="item with-link">
                            <span class="title">{{'added_by'|translate}}:</span>
                        </a>
                        <a class="item link" href="#/users/{{vacancy.creator.userId}}"
                           once-text="vacancy.creator.cutFullName">
                        </a>
                        {{vacancy.dc|dateFormat}}
                        <a ng-show="vacancy.numberOfPositions" class="item">
                            <span class="title">{{'Number of positions'|translate}}:</span>
                            <span>{{vacancy.numberOfPositions}}</span>
                        </a>
                        <div class="item lang noneNowrap col-lg-12" ng-show="vacancy.languages.length > 0">
                            <span class="title pull-left">{{'languages'|translate}}:</span>
                            <div class="pull-left newLang">
                                <span class="inlineLang" ng-repeat="lang in vacancy.languages">{{lang.name}} <span translate="{{lang.level}}"></span></span>
                            </div>
                        </div>
                        <div class="customFields col-lg-12" ng-show="fieldValue.fieldValue != undefined" ng-repeat="fieldValue in vacancy.customFields" class="phone">
                            <span class="title" ng-show="fieldValue.state == 'A'">{{fieldValue.title}}:</span>
                            <span ng-show="(fieldValue.type == 'string' || fieldValue.type == 'select') && fieldValue.state == 'A'">{{fieldValue.fieldValue.value}}</span>
                            <span ng-show="fieldValue.type == 'date' && fieldValue.state == 'A'">{{fieldValue.fieldValue.dateTimeValue|dateFormat}}</span>
                            <span ng-show="fieldValue.type == 'datetime' && fieldValue.state == 'A'">{{fieldValue.fieldValue.dateTimeValue|dateFormat2:true}}</span>
                        </div>
                        <!--<a href="#/company/custom-fields" class="find-button addCustomFields col-lg-12" ng-show="$root.me.recrutRole == 'admin'">-->
                            <!--{{'Add/Edit custom field'|translate}}-->
                        <!--</a>-->
                    </div>
                    <div class="col-lg-6 no-padding-sm">
                        <div class="col-lg-12 paddingZero" ng-show="$root.me.recrutRole != 'researcher'">
                            <div class="input-outer short-info">
                                <div class="blockRespUser">
                                <span class="respUser">
                                    <h5 class="text-center">
                                        {{'Responsible for a vacancy'|translate}}
                                        <i class="fa fa-info-circle" aria-hidden="true" ng-mouseover="hoverInfoShow('one')" ng-mouseleave="hoverInfoHidden('one')">
                                            <div class="tooltip-inner-info" ng-show="visibility">
                                                <p>{{"Choose users responsible for this vacancy and functions they perform in it."|translate}}</p>
                                                <p>{{"This vacancy role is only a title and does not affect the user role & capabilities in the account."|translate}}</p>
                                            </div>
                                         </i>
                                    </h5>
                                    <span class="title no-left-margin pull-right"> {{'Responsible types'|translate}}<span class="new-label">New</span></span>
                                    <span class="responsibleSelect" ng-switch="vacancy.responsiblesPerson.length > 0">

                                        <select class="form-control pull-left" ng-show="$root.me.recrutRole != 'client'" hide-onclick-anywhere-but-here="" ng-model="person.userId" ng-change="showAddResponsibleUser(person)">
                                            <option value="" disabled selected hidden>{{'choose_user2' | translate}}</option>
                                            <option ng-repeat="person in persons| responsibleWithout:vacancy.responsiblesPerson"
                                                    ng-show="state.value != 'deleted'
                                                     && state.value != vacancy.status"
                                                    ng-if="person.cutFullName == $root.me.cutFullName"
                                                    value="{{person.userId}}">
                                                ({{'Me' | translate}}) {{person.cutFullName}}
                                            </option>
                                            <option ng-repeat="person in persons | orderBy:['status', 'cutFullName'] | responsibleWithout:vacancy.responsiblesPerson"
                                                    ng-show="state.value != 'deleted'
                                                     && state.value != vacancy.status"
                                                    ng-if="person.cutFullName != $root.me.cutFullName && person.status == 'A'"
                                                    ng-class="{disable: (person.status != 'A')}"
                                                    value="{{person.userId}}">
                                                {{person.cutFullName}}
                                            </option>
                                        </select>
                                    </span>
                                    <div class="clever-window hideable responsible" ng-show="false">
                                    </div>
                                </span>
                                </div>
                                <div class="clearfix"></div>
                                <div class="responsibles">
                                    <div class="responsible" ng-repeat="responsible in vacancy.responsiblesPerson">
                                        <a class="inline" href="#users/{{responsible.responsible.userId}}"
                                           title="{{responsible.responsible.fullName}}">
                                            {{responsible.responsible.cutFullName}}
                                        </a>
                                        <i ng-show="$root.me.recrutRole!='client'"
                                           class="fa fa-times"
                                           ng-click="showRemoveResponsibleUser(responsible.responsible)">
                                        </i>
                                        <select ng-show="$root.me.recrutRole != 'client' && $root.me.recrutRole != 'researcher'" class="form-control pull-right"  ng-model="responsible.type" ng-change="changeResponsibleRole(responsible)">
                                            <option value="recruiter">Recruiter</option>
                                            <option value="salesManager">Sales Manager</option>
                                            <option value="interviewer">Interviewer</option>
                                            <option value="researcher">Researcher</option>
                                            <option ng-show="$root.me.recrutRole == 'client'" value="hiringManager">Hiring Manager</option>
                                        </select>
                                        <!--ng-show="$root.me.recrutRole != 'client' && responsible.type != 'hiringManager' && responsible.type != 'researcher' && $root.me.recrutRole != 'researcher'-->
                                    <!--<div class="pull-right" style="width: 150px; max-width: 150px;  text-align: center; position: relative; left: -3px;">-->
                                        <!--<span ng-show="responsible.type == 'hiringManager'">-->
                                            <!--<span >Hiring Manager</span>-->
                                        <!--</span>-->
                                         <!--<span ng-show="responsible.type == 'researcher'">-->
                                            <!--<span >Researcher</span>-->
                                        <!--</span>-->
                                    <!--</div>-->
                                    <span ng-show="$root.me.recrutRole == 'client' || $root.me.recrutRole == 'researcher'" class="pull-right">
                                        <span ng-show="responsible.type == 'recruiter'">Recruiter</span>
                                        <span ng-show="responsible.type == 'salesManager'">Sales Manager</span>
                                        <span ng-show="responsible.type == 'interviewer'">Interviewer</span>
                                        <span ng-show="responsible.type == 'researcher'">Researcher</span>
                                        <span ng-show="responsible.type == 'hiringManager'">Hiring Manager</span>
                                    </span>
                                        <div class="clearfix"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12 input-outer paddingZero">
                            <span class="title">{{'status'|translate}}</span>
                            <div class="select">
                                <select class="form-control"
                                        ng-model="statusForChange"
                                        name="status"
                                        required
                                        ng-change="showChangeStatusOfVacancy(statusForChange)">
                                    <option value="{{status.value}}" ng-show="status.value != 'deleted'"
                                            ng-repeat="status in status">{{'vacancy_status_assoc.' + status.value|translate}}
                                    </option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-12">
                    <div class="description" ng-show="vacancy.descr">
                        <h4>{{'description'|translate}}</h4>
                        <div description-treatment description="vacancy.descr" class="content-description"></div>
                    </div>
                </div>
            </div>
            <div class="col-lg-5 short-info short-info-bg">
                <a class="public-link pull-left" target="_blank" ng-href="{{publicLink}}" ng-show="vacancy.descr.length > 30">
                    <i class="fa fa-link" aria-hidden="true"></i>
                    <span>
                        {{'Go to public vacancy'|translate}}
                    </span>
                </a>
                <!--<a class="promoImg" add-promo-logo ng-show="$root.promoLogo == undefined" href="" id="logo-button">-->
                    <!--<i class="fa fa-picture-o" aria-hidden="true"></i>-->
                    <!--<span>-->
                        <!--{{'Add promo image'|translate}}-->
                    <!--</span>-->
                <!--</a>-->
                <!--<div id="owner_photo_wrap" class="pull-left">-->
                    <!--<input id="the-file-input" accept="image/*" type="file" style="display:none">-->
                    <!--<img ng-show="$root.promoLogo != undefined" class="imgForPromo" ng-click="openPromoLogo($root.promoLogo);" ng-src="{{$root.serverAddress}}/getapp?id={{$root.promoLogo}}&d=" alt=""/>-->
                    <!--<span ng-show="$root.promoLogo != undefined" class="deletePromoLogo">-->
                        <!--<i class="fa fa-times pull-right" ng-click="removePromoLogo()" title="{{'remove_logo'|translate}}"></i>-->
                    <!--</span>-->
                <!--</div>-->
                <a class="send-vacancy pull-left" href="" ng-show="vacancy.descr.length > 30" ng-click="showSendEmailTemplateModal()">
                    <i class="fa fa-envelope" aria-hidden="true"></i>
                        <span>
                            {{'Send by email'|translate}}
                        </span>
                </a>
                <div class="clearfix"></div>
                <div class="social hidden-xs hidden-sm"
                     ng-if="vacancy.descr.length > 30 && (vacancy.status != 'payment' && vacancy.status != 'canceled' && vacancy.status != 'completed')">
                    <h4>
                        {{"Social Networks"|translate}}
                    </h4>
                    <span ng-show="vacancy.descr.length > 30 && (isResponsiblePerson == true) && (vacancy.status != 'payment' && vacancy.status != 'canceled' && vacancy.status != 'completed')"
                          translate="Get applicants from Social Networks. Share this vacancy on your"></span>
                    <span ng-show="vacancy.descr.length > 30 && (isResponsiblePerson == false || isResponsiblePerson == undefined) && (vacancy.status != 'payment' && vacancy.status != 'canceled' && vacancy.status != 'completed')"
                          translate="Help your colleague to find candidates for this vacancy. Share it on your"></span>
                    <div class="social-links">
                        <i class="fa fa-linkedin linkedin" id="shareButton1" ng-click="share('linkedin')"
                           aria-hidden="true"></i>
                        <i class="fa fa-facebook facebook" id="shareButton2" ng-click="share('facebook')"
                           aria-hidden="true"></i>
                        <a target="blank"
                           ng-href="http://twitter.com/intent/tweet?url={{publicLink| escape}}&text={{'Vacancy'| translate}} {{publicName}}&hashtags=cleverstaff"
                           ng-click="addPublish('twitter')">
                            <i class="fa fa-twitter twitter" aria-hidden="true"></i>
                        </a>
                        <a target="_blank"
                           ng-click="addPublish('vk')"
                           ng-href="http://vk.com/share.php?url={{publicLink| escape}}&title={{'Vacancy'| translate}} {{publicName}}&image={{publicImgLink| escape}}&noparse=false&description={{publicDescr| cut:true:300:'...'}}">
                            <i class="fa fa-vk vk" aria-hidden="true"></i>
                        </a>
                    </div>
                    <div class="statistic">
                        <span class="grey">{{'Posts in Social Networks'| translate}}:</span>
                        <strong>{{vacancy.publishingCount}}</strong>
                        <br/>
                        <span class="grey">{{'Unique visits'| translate}}:</span>
                        <strong>{{vacancy.visitsCount}}</strong>
                        <br/>
                        <span class="grey">{{'Applied candidates'| translate}}:</span>
                        <strong>{{vacancy.recallsCount}}</strong>
                    </div>
                </div>
                <div class="social hidden-xs hidden-sm" ng-if="vacancy.descr == undefined || vacancy.descr.length < 30">
                    <h4>
                        {{"Social Networks"|translate}}
                    </h4>
                    <span>{{'Please add more detailed job description for candidates before publishing in social networks'| translate}}.</span>
                </div>
                <div class="social hidden-xs hidden-sm" ng-if="vacancy.descr.length > 30 && (vacancy.status != 'payment' && vacancy.status != 'canceled' && vacancy.status != 'completed')">
                    <h4 class="not-bold">
                        {{'Job_poste_on_the_page_in_Facebook'|translate}}
                    </h4>
                    <div class="hoverFbPages"
                         ng-show="tab.type == 'facebook_page' && !tab.dd"
                         ng-repeat="tab in vacancy.publish">
                        <a ng-href="https://www.facebook.com/{{tab.name}}-{{tab.pageId}}/app/{{facebookAppId}}"
                           target="_blank">{{tab.name}}</a>
                        <i class="fa fa-times pull-right" ng-click="$root.showDeleteFbPages(tab);"
                           title="{{'Delete_job_of_your_page_in_facebook'|translate}}"></i>
                    </div>
                    <div class="text-center button">
                        <a type="button" class="btn btn-primary" ng-click="showShareFbPages()">
                            <span ng-show="vacancy.publish.length == 0">
                                {{'Share_on_the_company_page_in_Facebook'|translate}}
                            </span>
                            <span ng-show="vacancy.publish.length > 0">
                                {{'Share_on_the_company_page_in_Facebook_1'|translate}}
                            </span>
                        </a>
                    </div>
                </div>
                <div class="files">
                    <h4>
                        {{'files'|translate}}
                    </h4>
                    <div class="item" ng-repeat="file in vacancy.files"
                         ng-show="vacancy.files">
                        <div class="menu">
                            <span class="item">
                                <h5 ng-show="file.showEditFileName">
                                    Изменить название файла</h5>
                               <i ng-show="!file.url" class="fa fa-paperclip pull-left" aria-hidden="true"></i>
                                <a ng-show="!file.url && !file.showEditFileName"
                                   ng-click="showModalResume(file)"
                                   once-title="file.fileName">
                                    {{file.fileName|fileNameCut:0:15}}
                                </a>
                                 <a ng-show="file.url && !file.showEditFileName" href="{{file.url}}"
                                    target="_blank" title="{{ file.fileName}}">
                                     {{file.fileName| fileNameCut:0:15}}
                                 </a>
                                <input ng-model="file.fileName" ng-show="file.showEditFileName" type='text'
                                       name='name' value='{{file.fileName| limitTo:15}}' id="showEditFile">
                                <button ng-show="file.showEditFileName" ng-click="editFileName(file)">OK
                                </button>
                                <!--<i style="cursor: pointer" class=" remove icon" ng-click="removeFile(file.fileId)"></i>-->
                                <i ng-click="MenuEdDelFile(file)" ng-show="!file.showEditFileName" class="fa fa-chevron-down pull-right"></i>
                                <div class="editFileMenu" ng-if="file.showMenuEdDelFile">
                                    <a ng-href="{{serverAddress}}/getapp/{{ file.fileId}}/{{ file.fileName}}"
                                       ng-show="!file.url" class="item">
                                        <i class="fa fa-arrow-circle-o-down"></i>&nbsp;{{'Download file'|translate}}
                                    </a>
                                    <br/>
                                    <a href="" ng-click="showEditFileNameFunc(file)">
                                        <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                                        <span ng-show="!file.url">{{'Change file name'|translate}}</span>
                                        <span ng-show="file.url">{{'Change link name'|translate}}</span>
                                    </a>
                                    <br/>
                                    <a href="" ng-click="removeFile(file.fileId)">
                                        <i class="fa fa-times" aria-hidden="true"></i>
                                        <span ng-show="!file.url">
                                            {{'Delete file'|translate}}
                                        </span>
                                        <span ng-show="file.url">
                                            {{'Delete link'|translate}}
                                        </span>
                                    </a>
                                </div>
                            </span>
                        </div>
                    </div>
                    <div class="text-center button">
                        <input type="file" oi-file="optionsForVacancy" id="file-vacancy" class="hidden"/>
                        <label for="file-vacancy" type="button" class="btn btn-primary hidden-xs hidden-sm">
                            <span>
                                {{'Attach file'|translate}}
                            </span>
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div ng-show="currentTab == 'candidate'" class="row vacancy-statuses">
        <div class="col-lg-3 statuses no-padding-sm" ng-show="!showSearchCandidate">
            <div>
                <h4 class="pull-left">
                    <i class="fa fa-align-right" aria-hidden="true"></i>
                    {{'Stages' | translate }}
                </h4>
                <div class="pull-left settings" ng-show="$root.me.recrutRole != 'client'">
                    <a ng-click="candidateInVacancy('extra_status')" title="{{'Setting the stage' | translate}}">
                        <i class="fa fa-cog"></i>
                    </a>
                </div>
                <div class="show-list hidden-xs hidden-sm">
                    <a href="" ng-click="showSearchCandidateFunc()">{{'Show a list' | translate}}</a>
                </div>
                <div class="clearfix"></div>
                <div class="sortableOptions">
                    <div>
                        <div ng-click="showRecalls(recallsStage[0])" ng-show="$root.me.recrutRole !== 'researcher'" class="status">
                            <a href="">{{'recalls'|translate}}</a>
                            <span class="counter">
                             <span ng-show="(recalls | filter:{'status':'reviewed'}).length > 0">{{(recalls|filter:{'status':'reviewed'}).length}}</span>
                                <span ng-show="(recalls | filter:{'status':'unwatched'}).length > 0"> +{{(recalls|filter:{'status':'unwatched'}).length}} {{'newest'|translate}}</span>
                            </span>
                            <span ng-show="$root.me.recrutRole === 'admin' || $root.me.recrutRole === 'client'"
                                    ng-class="{'admin':$root.me.recrutRole == 'admin', 'client':$root.me.recrutRole === 'client'}"
                                  class="pull-right unlock">
                                <i class="fa" aria-hidden="true" style="color: #ffc100"
                                   ng-class="{'fa-lock': recallsStage[0].hidden,
                                   'fa-unlock': !recallsStage[0].hidden}"
                                   ng-click="settingAccess($event, recallsStage[0])"
                                   title="{{(recallsStage[0].hidden)? 'Candidates on this stage are invisible for a Hiring manager role':'Candidates on this stage are visible for a Hiring manager role'|translate}}"></i>
                            </span>
                            <div class="clearfix"></div>
                        </div>
                    </div>
                    <div ng-repeat="status in VacancyStatusFiltered"
                         ng-if="status.value == 'longlist'"
                         ng-class="{'moveble' : status.movable == true && showMoveble == true,
                        'active': activeName == status.value || activeCustomStageName == status.name}"
                         ng-click="candidateInVacancy(status)"
                         class="status">
                        <i ng-show="status.movable == true && showMoveble == true" class="fa fa-arrows-v"
                           aria-hidden="true"></i>
                        <a href="">{{status.value|translate}}</a>
                       <span class="counter">
                           {{status.count}}
                       </span>
                        <span ng-show="$root.me.recrutRole === 'admin' || $root.me.recrutRole === 'client'"
                              ng-class="{'admin':$root.me.recrutRole == 'admin', 'client':$root.me.recrutRole === 'client'}"
                              class="pull-right unlock"
                              ng-click="settingAccess($event, status)">
                            <i class="fa"
                               ng-class="{'fa-lock': status.hidden, 'fa-unlock': !status.hidden}"
                               aria-hidden="true"
                               style="color: #ffc100"
                               title="{{(status.hidden)? 'Candidates on this stage are invisible for a Hiring manager role':'Candidates on this stage are visible for a Hiring manager role'|translate}}"
                            ></i>
                        </span>
                        <div class="clearfix"></div>
                    </div>
                    <div ng-sortable="sortableOptions" >
                        <div ng-repeat="status in movableStages"
                             ng-class="{'active': activeName == status.value || activeCustomStageName == status.name}"
                             ng-click="candidateInVacancy(status)"
                             class="status moveble">
                            <i ng-show="status.movable == true && showMoveble == true" class="fa fa-arrows-v"
                               aria-hidden="true"></i>
                            <a href="">{{status.value|translate}}</a>
                            <span class="counter">
                           {{status.count}}
                       </span>
                            <span ng-show="$root.me.recrutRole === 'admin' || $root.me.recrutRole === 'client'"
                                  ng-class="{'admin':$root.me.recrutRole == 'admin', 'client':$root.me.recrutRole === 'client'}"
                                  class="pull-right unlock"
                                  ng-click="settingAccess($event, status)">
                            <i class="fa"
                               ng-class="{'fa-lock': status.hidden, 'fa-unlock': !status.hidden}"
                               aria-hidden="true"
                               style="color: #ffc100"
                               title="{{(status.hidden)? 'Candidates on this stage are invisible for a Hiring manager role':'Candidates on this stage are visible for a Hiring manager role'|translate}}"
                            ></i>
                        </span>
                            <div class="clearfix"></div>
                        </div>
                    </div>
                    <div ng-repeat="status in VacancyStatusFiltered"
                         ng-if="status.type != 'refuse' && status.value == 'approved'"
                         ng-class="{'active': activeName == status.value || activeCustomStageName == status.name}"
                         ng-click="candidateInVacancy(status)"
                         class="status">
                        <i ng-show="status.movable == true && showMoveble == true" class="fa fa-arrows-v"
                           aria-hidden="true"></i>
                        <a href="">{{status.value|translate}}</a>
                        <span class="counter">
                           {{status.count}}
                       </span>
                        <span ng-show="$root.me.recrutRole === 'admin' || $root.me.recrutRole === 'client'"
                              ng-class="{'admin':$root.me.recrutRole == 'admin', 'client':$root.me.recrutRole === 'client'}"
                              class="pull-right unlock"
                              ng-click="settingAccess($event, status)">
                            <i class="fa"
                               ng-class="{'fa-lock': status.hidden, 'fa-unlock': !status.hidden}"
                               aria-hidden="true"
                               style="color: #ffc100"
                               title="{{(status.hidden)? 'Candidates on this stage are invisible for a Hiring manager role':'Candidates on this stage are visible for a Hiring manager role'|translate}}"
                            ></i>
                        </span>
                        <div class="clearfix"></div>
                    </div>
                </div>
            </div>
            <div class="declines">
                <div ng-repeat="status in VacancyStatusFiltered"
                     ng-click="candidateInVacancy(status)"
                     ng-class="{'moveble' : status.movable == true && showMoveble == true,
                     'active': activeName == status.value || activeCustomStageName == status.name}"
                     ng-if="status.type == 'refuse'" class="decline status">
                    <a href="">{{status.value|translate}}</a>
                       <span class="counter">
                          {{status.count}}
                       </span>
                    <span ng-show="$root.me.recrutRole === 'admin' || $root.me.recrutRole === 'client'"
                          ng-class="{'admin':$root.me.recrutRole == 'admin', 'client':$root.me.recrutRole === 'client'}"
                          class="pull-right unlock"
                          ng-click="settingAccess($event, status)">
                            <i class="fa"
                               ng-class="{'fa-lock': status.hidden, 'fa-unlock': !status.hidden}"
                               aria-hidden="true"
                               style="color: #ffc100"
                               title="{{(status.hidden)? 'Candidates on this stage are invisible for a Hiring manager role':'Candidates on this stage are visible for a Hiring manager role'|translate}}"></i>
                        </span>
                    <div class="clearfix"></div>
                </div>
            </div>
            <div class="text-center hidden-xs hidden-sm" ng-show="$root.me.recrutRole != 'client'">
                <a type="button" ng-click="candidateInVacancy('extra_status')" class="btn btn-primary">
                    {{'Setting the stage' | translate}}
                </a>
                <span class="clarification" ng-show="$root.me.recrutRole == 'admin'">
                    {{'For account Admins only'|translate}}
                </span>
            </div>
            <div class="text-center" ng-show="activeName == 'extra_status' && $root.me.recrutRole == 'admin'">
                <a type="button" ng-click="saveStagesForAllVacancies()" title="{{'Make the current set of stages as default for new vacancies' | translate}}" class="btn btn-primary default">
                    {{'Make default' | translate}}
                </a>
                <br/>
                <span class="thin">*{{'This feature is only available to administratorzs' | translate}}</span>
            </div>
        </div>
        <div class="col-lg-9 status-info no-padding-sm" ng-class="{'col-lg-12' : showSearchCandidate}"
             ng-show="(!visiable || $root.me.recrutRole !== 'client') && (activeName != 'extra_status' && activeName != 'recalls')">
            <div class="sorting" ng-show="tableParams.data.length > 1">
                <label>
                    {{'Sort by'|translate}}:
                </label>
                <select ng-model="sortValue">
                    <option selected value="addInVacancyDate">
                        {{'Added date to vacancy'|translate}}
                    </option>
                    <option value="lastActionInVacancyDate">
                        {{'Date of last action on this vacancy'|translate}}
                    </option>
                    <option value="addedByUser">
                        {{'By added user'|translate}}
                    </option>
                    <option value="alphabetical">
                        {{'Alphabetical order (A-Z)'|translate}}
                    </option>
                </select>
            </div>
            <div class="row header" ng-show="!showSearchCandidate">
                <div class="col-lg-4">
                    <h4 ng-show="!activeCustomStageName">{{activeName | translate}}</h4>
                    <h4 ng-show="activeCustomStageName">
                        {{activeCustomStageName}}
                    </h4>
                </div>
                <div class="col-lg-8 text-right links hidden-xs hidden-sm">
                    <div class="col-lg-4" ng-show="$root.me.recrutRole != 'researcher' && $root.me.recrutRole != 'freelancer' && $root.me.recrutRole != 'salesmanager'">
                        <a ng-show="vacancy.testIds.length > 0" ng-click="$root.sendTestFromVacancyStage(activeName, 'longlist', dataForVacancy)" title="{{'Send test' | translate}}">
                            {{'Send test' | translate}}
                            <i class="fa fa-check-square-o" aria-hidden="true"></i>
                        </a>
                        <a ng-show="vacancy.testIds.length == 0" href="#/candidate/tests" title="{{'Create new test' | translate}}">
                            {{'Create new test' | translate}}
                            <i class="fa fa-check-square-o" aria-hidden="true"></i>
                        </a>
                    </div>
                    <div class="col-lg-4" ng-show="$root.me.recrutRole != 'researcher' && $root.me.recrutRole != 'freelancer' && $root.me.recrutRole != 'salesmanager' && (($root.me.recrutRole == 'admin' && $root.me.personParams.enableDownloadToExcel != 'N') || $root.me.personParams.enableDownloadToExcel == 'Y')">
                        <a ng-click="exportToExcel()" ng-show="$root.hideTariff" title="{{'Export to Excel' | translate}}">
                            {{'Export to Excel' | translate}}
                            <i class="fa fa-file-excel-o" aria-hidden="true"></i>
                        </a>
                        <button id="disabledBtn-4" ng-show="!$root.hideTariff"  ng-click="$root.disabledBtnFunc();" type="button" class="btn btn-default disabled">
                            {{'Export to Excel' | translate}}
                            <i class="fa fa-file-excel-o" aria-hidden="true"></i>
                        </button>
                    </div>
                    <div class="col-lg-4" ng-show="$root.me.recrutRole != 'salesmanager'">
                        <a id="export_in_excel" class="hidden" href="">
                        </a>
                        <a ng-click="sendCandidatesToClient()">
                            {{'Send to the Client'|translate}}
                            <i class="fa fa-envelope" aria-hidden="true"></i>
                        </a>
                        <!--<a href="#/email/vacancy/{{vacancy.localId}}">-->
                            <!--{{'Send to the Client'|translate}}-->
                            <!--<i class="fa fa-envelope" aria-hidden="true"></i>-->
                        <!--</a>-->
                    </div>
                </div>
            </div>
            <table class="table" ng-table="tableParams" template-pagination="custom/pager">
                <thead>
                <tr>
                    <th>
                        №
                        <i class="fa fa-sort pull-right" aria-hidden="true"></i>
                    </th>
                    <th>
                        {{'vacancy_save_1'|translate}}
                        <i class="fa fa-sort pull-right" aria-hidden="true"></i>
                    </th>
                    <th>
                        {{'region'|translate}}
                        <i class="fa fa-sort pull-right" aria-hidden="true"></i>
                    </th>
                    <th ng-show="!showSearchCandidate">
                        {{'stage'|translate}}
                        <i class="fa fa-sort pull-right" aria-hidden="true"></i>
                    </th>
                    <th class="hidden-xs">
                        {{'comment'|translate}}
                        <i class="fa fa-sort pull-right" aria-hidden="true"></i>
                    </th>
                    <th>
                        {{'salary'|translate}}
                        <i class="fa fa-sort pull-right" aria-hidden="true"></i>
                    </th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="candidate in dataForVacancy" ng-class="{'archived': candidate.candidateId.status == 'archived'}">
                    <td class="number" data-title="'№'" once-text="(tableParams.page() - 1) * tableParams.count() + $index + 1"></td>
                    <td class="preview text-center width-for-table-eye hidden-xs" priview="" pageid="candidate" candidate="candidate.candidateId">
                        <div>
                            <i class="fa fa-address-card-o text_change" title="{{'CV preview'|translate}}" aria-hidden="true"></i>
                        </div>
                    </td>

                    <!--<td priview="" pageid="candidate" candidate="candidate.candidateId" style="width: 1%;text-align: center;padding: 1px;font-size: 22px;" class="ng-isolate-scope">-->
                        <!--<div class=" ui button previewCandidate" style="padding: 0px;font-size: 16px;border: 1px solid #B5B5B5 !important;;float: right;border-radius: 8px!important;">-->
                            <!--<i class="unhide icon text_change" style="margin-right: 0px;color: black;"></i>-->
                        <!--</div>-->
                    <!--</td>-->
                    <td class="name" data-title="'Name'">
                        <a href="#/candidates/{{::candidate.candidateId.localId}}" ng-click="$event.stopPropagation();">{{::candidate.candidateId.fullName}}</a>
                    </td>

                    <td class="date" ng-if="candidate.candidateId.status != 'archived'">
                        <span ng-click="openChangeVacancyInterviewDate(candidate);$event.stopPropagation();">
                            {{::candidate.dateInterview|dateFormat:true}}
                            <i ng-if="candidate.dateInterview" class="fa fa-pencil" aria-hidden="true"></i>
                        </span>
                        <span ng-if="!candidate.dateInterview"
                              ng-show="candidate.isInterview || (candidate.state == 'interview' || candidate.state == 'tech_interview'
                              || candidate.state == 'hr_interview' || candidate.state == 'interview_with_the_boss' || candidate.state == 'interview_with_the_client')"
                              ng-click="openChangeVacancyInterviewDate(candidate);$event.stopPropagation();"
                              class="set-interview">{{'Set interview time' | translate}} <i class="fa fa-calendar" aria-hidden="true"></i></span>
                    </td>
                    <td class="button-outer" ng-if="candidate.candidateId.status != 'archived'" ng-click="$event.stopPropagation();openVacancyCandidateChangeStatus(candidate);" ng-class="{'hidden-xs': showSearchCandidate ||candidate.isInterview || (candidate.state == 'interview' || candidate.state == 'tech_interview'
                    || candidate.state == 'hr_interview' || candidate.state == 'interview_with_the_boss' || candidate.state == 'interview_with_the_client')}">
                        <a href="" class="btn btn-success no-hover-sm">{{'change_status' | translate}}</a>
                    </td>
                    <td class="responsible hidden-xs" ng-if="candidate.candidateId.status != 'archived'" ng-click="$event.stopPropagation()">
                        <a ng-repeat="responsible in persons" href="#/users/{{::responsible.userId}}"
                           ng-show="responsible.userId && (responsible.userId == candidate.creatorId)">
                            <!--<img src="images/sprite/testprofile.png" class="img-circle" width="30" height="30">-->
                            <!--{{responsible.fullName}}-->
                            <div class="responsible-initials" title="{{::responsible.cutFullName}}">
                                <span>{{getFirstLetters(responsible.fullName)}}</span>
                            </div>
                        </a>
                    </td>
                    <td ng-show="showSearchCandidate" ng-class="{'fixed-width' : candidate.candidateId.status !== 'archived'}" ng-if="candidate.candidateId.status != 'archived'">
                        <span title="{{candidate.state | translate}}">{{::candidate.state | translate | limitTo: 16}}{{::candidate.state.length > 16 ? '...' : ''}}</span>
                    </td>
                    <!--<td class="comment">-->
                        <!--<span>{{candidate.comment}}</span>-->
                    <!--</td>-->
                    <td ng-class="{'ng-hide': candidate.candidateId.status == 'archived'}"></td>
                    <td class="add-comment-text text-right hidden-xs" ng-if="candidate.candidateId.status != 'archived'">
                        <span title="{{::candidate.dm | dateFormat2}}" ng-click="showModalAddCommentToCandidate(candidate);$event.stopPropagation();" ng-show="activeName != 'approved'" class="comment text-left pull-left">
                            {{candidate.comment | limitTo:80}}
                            <span class="comment" ng-show="candidate.comment.length > 53 && activeName != 'approved'">...</span>
                        </span>
                        <a href="#/company/employee/add/{{::candidate.candidateId.localId}}" ng-click="$event.stopPropagation();"
                           ng-show="activeName == 'approved' && ($root.me.personParams.enableEmployee == 'Y' || $root.me.orgParams.enableEmployee == 'Y')"
                           class="btn btn-success">
                            {{'our employee' | translate}}
                        </a>
                        <a ng-show="activeName == 'approved' && ($root.me.personParams.enableEmployee != 'Y' || $root.me.orgParams.enableEmployee != 'Y')" type="button" href="#/hr-module-info"
                           class="btn btn-success hidden">
                            {{'our employee'|translate}}!
                        </a>
                    </td>
                    <!--<td></td>-->
                    <!--<td class="add-comment-text text-right hidden-xs delete" ng-if="candidate.candidateId.status != 'archived'" title="{{'Remove Candidate' | translate}} {{'from vacancy' | translate}}" ng-click="showDeleteInterview(candidate);$event.stopPropagation();">-->
                        <!---->
                    <!--</td>-->
                    <td ng-if="candidate.candidateId.status == 'archived'" class="candidate-deleted" translate="Candidate has been removed from the database" colspan="2">
                    </td>
                    <td ng-if="candidate.candidateId.status == 'archived'" colspan="2" class="text-center hidden-xs">
                        <button class="restore-candidate" translate="Restore" ng-click="restoreCandidate(candidate.candidateId.candidateId, candidate.candidateId.localId, candidate.candidateId.fullName)">
                        </button>
                    </td>
                    <td ng-if="candidate.candidateId.status == 'archived'" colspan="2" class="text-left hidden-xs">
                        <span translate="Remove from this vacancy" class="remove-from-vacancy" ng-click="showDeleteInterview(candidate);$event.stopPropagation();">
                        </span>
                    </td>
                    <td ng-class="{'ng-hide': candidate.candidateId.status == 'archived'}" style="width: 6%;">
                        <i ng-show="activeName != 'approved'" ng-click="showModalAddCommentToCandidate(candidate);$event.stopPropagation();" title="{{'Edit comment' | translate}}" class="fa fa-pencil" aria-hidden="true"></i>
                        <i class="fa fa-times delete" aria-hidden="true"  title="{{'Remove Candidate' | translate}} {{'from vacancy' | translate}}" ng-click="showDeleteInterview(candidate);$event.stopPropagation();"></i>
                    </td>
                </tr>
                </tbody>
            </table>
            <h4 class="text-center"
                ng-show="(showTable === 'not available' || showTable === undefined && $scope.loadingCandidates == false) && !noCandidatesInThisVacancy">
                {{'No such candidates yet'|translate}}
            </h4>
            <h4 class="text-center"
                ng-show="noCandidatesInThisVacancy && !dataForVacancy.length">
                {{"This vacanсy doesn't contain candidates now"|translate}}
            </h4>
        </div>
        <div id="recallsTable" class="col-lg-7 status-info no-padding-sm" ng-class="{'col-lg-12' : showSearchCandidate}"
             ng-if="($root.me.recrutRole !== 'client')">
            <table class="table">
                <thead class="recalls-header">
                <tr>
                    <th translate="application_date"></th>
                    <th class="hidden-xs hidden-sm"></th>
                    <!--<th>asd</th>-->
                    <th translate="name"></th>
                    <th translate="phone"></th>
                </tr>
                </thead>
                <tbody>
                <tr ng-click="toOneRecall(recall.recallId)" ng-repeat="recall in recalls|orderBy:'-dc':true">
                    <td bo-text="recall.dc| dateFormat:true"></td>
                    <td class="button-outer text-center padding-right"  ng-class="{'hidden-xs': showSearchCandidate ||candidate.isInterview || (candidate.state == 'interview' || candidate.state == 'tech_interview'
                        || candidate.state == 'hr_interview' || candidate.state == 'interview_with_the_boss' || candidate.state == 'interview_with_the_client')}">
                        <a href="" ng-show="recall.candidates" class="btn btn-success no-hover-sm"
                           ng-click="$event.stopPropagation();openVacancyCandidateChangeStatus(recall);" >{{'change_status' | translate}}</a>
                    </td>
                    <!--<td class="button-outer hidden-xs hidden-sm">-->
                        <!--&lt;!&ndash;<a href="" ng-click="openVacancyCandidateChangeStatus(recall.candidates[0]);$event.stopPropagation();" ng-show="recall.candidates" class="btn btn-success">{{'change_status' | translate}}</a>&ndash;&gt;-->
                    <!--</td>-->
                    <td>
                        <span>
                            <a ng-href="#/candidates/{{recall.candidates[0].localId}}"
                               ng-show="recall.candidates"
                               ng-click="$event.stopPropagation();"
                               bo-text="recall.candidates[0].fullName">
                            </a>
                            <span href="" ng-show="recall.candidateId.length == 0"
                                  bo-text="recall.name+' '+recall.lastName">
                            </span>
                        </span>
                    </td>
                    <td>
                        {{recall.phone}}
                    </td>
                </tr>
                </tbody>
            </table>
            <h4 class="text-center"
                ng-show="showTable === 'not available' || showTable === undefined && $scope.loadingCandidates == false">
                {{'No such candidates yet'|translate}}
            </h4>
        </div>
        <div class="col-lg-9 stages-option" ng-show="activeName == 'extra_status'">
            <div class="alert alert-danger col-lg-12" style="margin: 0 auto;" ng-show="extraStatusObj.show">
                <div ng-switch="extraStatusObj.messageText">
                    <span ng-switch-when="deleteStatus"
                          translate="You can not remove this status because it is there are candidates."></span>
                    <span ng-switch-when="deleteRefuse"
                          translate="You can not remove this refuse because it is there are candidates."></span>
                    <span ng-switch-when="ItyoSimle"
                          translate="You can not remove this status because it is there are candidates."></span>
                    <span ng-switch-when="SimpleToIt"
                          translate="You can not remove this status because it is there are candidates.">Невозможно изменить. Не получится убрать этап, на котором уже есть кандидаты.</span>
                    <span ng-switch-when="existsInOtherVacancy">
                        {{'This status is used in the vacancy' | translate}}
                        <a target="_blank" href=#/vacancies/{{existInVacancyErrorVacancy.localId}}">
                            {{existInVacancyErrorVacancy.position}}</a>,
                        {{'it can not be removed' | translate}}.
                    </span>
                </div>
                <i ng-click="extraStatusObj.show = false" class="fa fa-times pull-right" aria-hidden="true"></i>
            </div>
            <div class="alert alert-success" ng-show="extraStatusObjSucces.show">
                {{'settings applied'|translate}}
            </div>
            <div class="col-lg-4 resize" style="padding: 0px; width: 30%;">
                <h4>{{'Additional stages'|translate}}</h4>

                <div class="stages">
                    <div class="stage unlock clearfix clearfix"
                         ng-repeat="status in VacancyStatus| vacancyStatusInCheckFilter:'simpleVacancy'"
                         ng-show="status.value != 'no_contacts' && status.value != 'notafit' && status.value != 'declinedoffer' &&
                         status.value != 'no_response' && status.value != 'accepted_counter_offer' && status.value != 'found_another_job'
                         && status.value != 'is_not_looking_for_job'">
                        <label>
                            <input ng-checked="status.added" type="checkbox" ng-click="changeInterviewStatus(status, status.value, 'simpleVacancy')" name="{{status.value}}">
                            {{'interview_status_assoc.' + status.value|translate}}
                        </label>
                        <span ng-show="$root.me.recrutRole === 'admin' || $root.me.recrutRole === 'client'"
                              class="pull-right unlock">
                                <i class="fa" aria-hidden="true" style="color: #ffc100"
                                   ng-class="{'fa-lock': status.hidden && status.added, 'fa-unlock': !status.hidden && status.added}"
                                   ng-click="settingAccess($event, status)"
                                   title="{{(status.hidden)? 'Candidates on this stage are invisible for a Hiring manager role':'Candidates on this stage are visible for a Hiring manager role'|translate}}"
                                ></i>
                        </span>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 resize" style="width: 36.33333%;padding-right: 0px;">
                <h4> {{'Company stages'|translate}}</h4>

                <div class="stages">
                    <div class="stage unlock clearfix"
                         ng-repeat="status in customStages track by $index"
                         ng-show="status.type != 'refuse'">
                        <input ng-checked="status.added" type="checkbox" ng-click="changeCustomInterviewStatus(status, status.value, 'simpleVacancy')" name="{{status.value}}">
                        <i class="fa fa-comments-o" aria-hidden="true" ng-show="status.type == 'interview'"></i>
                        {{status.value|translate}}
                        <i class="fa fa-pencil" aria-hidden="true" title="{{'Edit candidate' | translate}}"
                           ng-click="showEditStage(status);$event.stopPropagation()"
                           ng-show="$root.me.recrutRole == 'admin'"></i>
                        <i class="fa fa-times" aria-hidden="true" title="{{'Delete' | translate}}"
                           ng-show="$root.me.recrutRole == 'admin'"
                           ng-click="deleteCustomStageFromCompany(status);$event.stopPropagation()"></i>
                        <span ng-show="$root.me.recrutRole === 'admin' || $root.me.recrutRole === 'client'"
                              class="pull-right unlock">
                                <i class="fa" aria-hidden="true" style="color: #ffc100"
                                   ng-class="{'fa-lock': status.hidden && status.added, 'fa-unlock': !status.hidden && status.added}"
                                   ng-click="settingAccess($event, status)"
                                   title="{{(status.hidden)? 'Candidates on this stage are invisible for a Hiring manager role':'Candidates on this stage are visible for a Hiring manager role'|translate}}"></i>
                        </span>
                    </div>
                </div>
                <a href=""
                   ng-show="$root.me.recrutRole == 'admin'"
                   ng-click="showAddStage()">
                    {{'Add new custom stage' | translate}}
                </a>
            </div>
            <div class="col-lg-4 clearfix resize" style="padding-right: 0px;">
                <h4> {{'Reasons for refusal'|translate}}</h4>

                <div class="stages">
                    <div class="stage unlock clearfix"
                         ng-repeat="status in VacancyStatus| vacancyStatusInCheckFilter:'simpleVacancy'"
                         ng-show="status.value == 'no_contacts' || status.value == 'notafit' || status.value == 'declinedoffer' ||
                         status.value == 'no_response' || status.value == 'accepted_counter_offer' || status.value == 'found_another_job'
                         || status.value == 'is_not_looking_for_job'">
                        <label>
                            <input ng-checked="status.added" type="checkbox" ng-click="changeInterviewStatus(status, status.value, 'simpleVacancy')" name="{{status.value}}">
                            {{status.value|translate}}
                        </label>
                        <span ng-show="$root.me.recrutRole === 'admin' || $root.me.recrutRole === 'client'"
                              class="pull-right unlock">
                                <i class="fa" aria-hidden="true" style="color: #ffc100"
                                   ng-class="{'fa-lock': status.hidden && status.added, 'fa-unlock': !status.hidden && status.added}"
                                   ng-click="settingAccess($event, status)"
                                   title="{{(status.hidden)? 'Candidates on this stage are invisible for a Hiring manager role':'Candidates on this stage are visible for a Hiring manager role'|translate}}"></i>
                        </span>
                    </div>
                    <div class="stage unlock clearfix"
                         ng-repeat="status in customStages track by $index"
                         ng-show="status.type == 'refuse'">
                        <input ng-checked="status.added" type="checkbox" ng-click="changeCustomInterviewStatus(status, status.value, 'simpleVacancy')" name="{{status.value}}">
                        {{status.value|translate}}
                        <i class="fa fa-pencil" aria-hidden="true" title="{{'Edit candidate' | translate}}"
                           ng-click="showEditRefuseStage(status);$event.stopPropagation()"
                           ng-show="$root.me.recrutRole == 'admin'"></i>
                        <i class="fa fa-times" aria-hidden="true" title="{{'Delete' | translate}}"
                           ng-show="$root.me.recrutRole == 'admin'"
                           ng-click="deleteCustomStageFromCompany(status);$event.stopPropagation()"></i>
                        <span ng-show="$root.me.recrutRole === 'admin' || $root.me.recrutRole === 'client'"
                              class="pull-right unlock">
                                <i class="fa" aria-hidden="true" style="color: #ffc100"
                                   ng-class="{'fa-lock': status.hidden && status.added, 'fa-unlock': !status.hidden && status.added}"
                                   ng-click="settingAccess($event, status)"
                                   title="{{(status.hidden)? 'Candidates on this stage are invisible for a Hiring manager role':'Candidates on this stage are visible for a Hiring manager role'|translate}}"></i>
                        </span>
                    </div>
                </div>
                <a href=""
                   ng-show="$root.me.recrutRole == 'admin'"
                   ng-click="showAddRefuseStage()">
                    {{'Add the cause of refuse' | translate}}
                </a>
            </div>
        </div>
        <div class="not-access pull-left col-lg-9 clearfix"   ng-show="noAccess && $root.me.recrutRole === 'client' && !visiable">
            {{"You have no access to candidate list on this stage. Please contact the user with an Admin role to access the candidate list."|translate}}
        </div>

        <div class="not-access col-lg-9 clearfix" ng-show="visiable && $root.me.recrutRole === 'client'">
            {{"You have no access to candidate list on this stage. Please contact the user with an Admin role to access the candidate list."|translate}}
        </div>
    </div>
    <div ng-if="currentTab == 'settings'">
        <div class="row vacancy-task-page block-vacancy-settings">
            <div class="row info">
                <h4>{{"Choose the email template"|translate}}</h4>
                <div class="col-lg-6" style="position: relative;">
                    <div class="radio" ng-repeat="template in emailTemplates track by $index">
                        <label><input type="radio" ng-checked="activeTemplate == template.type" value=""
                                      ng-click="showEditEmailTemplate(template)">{{template.name |translate}}
                            <i class="fa fa-info-circle tooltip-icon" ng-mouseover="hoverInfoShow('two', $index)" ng-mouseleave="hoverInfoHidden('two', $index)">  <!--two - флаг для того чтоб определить где вызван метод их несколько в коде-->
                            </i>
                        </label>
                    </div>
                    <div class="hoverExtension" ng-if="visibility2">
                        {{message | translate}}
                    </div>
                </div>
            </div>
            <div class="row template-edit-outer" ng-show="showAddEmailTemplate">
                <div class="col-lg-6 block-left">
                    <div class="row header">
                        <div class="col-lg-12">
                            <span class="title-header">
                                {{'Edit the template' | translate}} {{emailTemplate.name | translate}}
                            </span>
                        </div>
                    </div>
                    <span class="title">{{'Subject' | translate}}</span>
                    <input ng-model="emailTemplate.title"
                           ng-change="updateRenderedTitle()"
                           class="form-control" type="text">

                    <div>
                        <textarea ui-tinymce-for-render ng-model="emailTemplate.text" cols="30" rows="10"></textarea>
                        <div>
                             <span class="item" ng-repeat="file in fileForSave">
                                <i class="attachment left disk icon"></i>
                                <a ng-href="{{serverAddress}}/getapp/{{ file.fileId}}/{{ file.fileName}}" title="{{ file.fileName}}">
                                    {{file.fileName| fileNameCut:0:30}}
                                </a>
                                <i class="fa fa-times" aria-hidden="true" ng-click="removeFile(file.fileId)"></i>
                            </span>
                        </div>
                        <div class="buttons">
                            <button type="button" class="btn btn-default" ng-click="setDefaultTemplate()">{{'Set to default' | translate}}
                            </button>
                            <button ng-click="saveEmailTemplate()" type="button" class="btn btn-success">
                                {{'save'|translate}}
                            </button>
                            <input type="file" oi-file="optionsForTemplate" id="file" class="hidden"/>
                            <label ng-show="fileForSave.length == 0" for="file">
                                <i class="fa fa-download" aria-hidden="true"></i>
                                {{'Attach file' | translate}}</label>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 block-right pull-right">
                    <div class="row header">
                        <div class="col-lg-12">
                            <span class="title-header">
                                {{'Preview' | translate}}
                            </span>
                        </div>
                    </div>
                    <!--<span class="title">{{'Header text' | translate}}</span>-->
                    <br />
                    <input ng-model="renderedTitle"
                           ng-change="updateRenderedTitle()"
                           class="form-control"
                           disabled
                           type="text">
                <textarea ui-tinymce-for-render disabled-mce="true"
                          ng-model="emailTemplateForRender.text" cols="30" rows="10">
                </textarea>
                </div>
            </div>
        </div>
    </div>
    <div ng-show="currentTab == 'task'" ng-include="'partials/vacancy-task.html'"></div>
    <div ng-show="currentTab == 'history'" ng-include="'partials/vacancy-history.html'"></div>
</div>

<div id="candidate_preview">
    <div class="arrow_preview" id="arrow_preview"></div>
    <div class="ui bottom attached segment red"
         style="padding: 6px 6px 3px 6px;border-top: 0.2em solid #FFFFFF !important;"
         ng-show="!candidatePreview.showDocument">
        <!--<div class="ui inverted dimmer"  style="background-color:rgba(255, 255, 255, 0)!important;"-->
        <!--ng-class="{'active':loadingPriview}">-->
        <!--<div class="ui large text loader">{{'Loading'|translate}}...</div>-->
        <!--</div>-->
        <div ng-show="!loadingPriview" class="ui vertically divided grid">
            <div class="ui vertically-divided grid">
                <div class="sixteen wide column"
                     style="padding-left:0px;border-bottom: 1px solid rgba(0, 0, 0, 0.1);padding-left: 6px;">
                    <span class="ui small header" style="margin: 0px;">
                        <div>
                            <a style="margin-right: -4px;" href="#/candidates/{{candidatePreview.localId}}">
                                {{candidatePreview.fullName}}</a>
                            <span ng-show="candidatePreview.db">, {{candidatePreview.db|ageOfDate}}</span>
                        </div>
                        <div>
                            {{candidatePreview.position}}
                            <span ng-show="candidatePreview != undefined && candidatePreview.salary">,
                                <span ng-show="candidatePreview.salary != 0">{{candidatePreview.salary}} {{candidatePreview.currency}}</span>
                            </span>

                            <span ng-switch="candidatePreview.sex">
                                <span ng-switch-when="true"><i title="{{'male'|translate}}" class="male large icon"
                                                               style="color: #808080;margin-bottom: 7px;"></i></span>
                                <span ng-switch-when="false"><i title="{{'female'|translate}}" class="female large icon"
                                                                style="color: #808080;margin-bottom: 7px;"></i></span>
                            </span>
                        </div>
                    </span>
                </div>
            </div>
            <div class="ui vertically divided-grid">
                <img id="photo-preview" ng-if="candidatePreview.photo!=undefined"
                     ng-src="{{$root.serverAddress}}/getapp?id={{candidatePreview.photo}}&d={{$root.me.personId}}"
                     alt="" class="pull-left"/>
                <!--<img ng-if="candidatePreview.photo==undefined" border="5" src="img/missing-image-640x360.png" alt=""-->
                <!--style="margin:10px 10px 10px 3px;width: 172px;height: 115px; border-radius: 15%;border: 7.2em solid #E78409 !important;"/>-->

                <div class="twelve-wide column pull-right">

                    <table class="ui basic without_tr_border table">
                        <tbody class="candidatePreview-info">
                        <tr ng-show="candidatePreview != undefined && candidatePreview.region.city">
                            <td class="content-header">{{'lives_in'|translate}}</td>
                            <td class="item-in-table" style="padding: 0.5em 0.3em">
                                {{candidatePreview.region.displayCity}}
                            </td>
                        </tr>

                        <tr ng-show="candidatePreview != undefined && candidatePreview.expirence">
                            <td class="content-header">{{'experience'|translate}}</td>
                            <td class="item-in-table" style=" padding: 0.5em 0.3em">
                                {{'experience_assoc.'+candidatePreview.expirence|translate}}
                            </td>
                        </tr>

                        <tr ng-show="candidatePreview != undefined && candidatePreview.languages.length > 0">
                            <td class="content-header">{{'languages'|translate}}</td>
                            <td class="item-in-table" style=" padding: 0.5em 0.3em">
                                <span class="inlineLang" ng-repeat="lang in candidatePreview.languages">{{lang.name}}: <span translate="{{lang.level}}"></span><br/></span>
                            </td>
                        </tr>
                        <tr ng-show="candidatePreview != undefined && candidatePreview.employmentType">
                            <td class="content-header">{{'employment_type'|translate}}</td>
                            <td class="item-in-table" style=" padding: 0.5em 0.3em;word-break: break-all;"
                                ng-show="candidatePreview.employmentType">
                                    <span ng-repeat="emplType in candidatePreview.employmentType.split(',')">
                                        {{emplType|translate}}
                                        <!--{{$index}}{{emplType}}-->
                                    </span>
                            </td>
                        </tr>
                        <tr ng-show="candidatePreview != undefined && candidatePreview.readyRelocate && candidatePreview.relatedRegions!=undefined">
                            <td class="content-header" translate="ready_to_relocate"></td>
                            <td class="item-in-table" style=" padding: 0.5em 0.3em">
                                <span ng-repeat="region in candidatePreview.relatedRegions">{{region.fullName}}&nbsp;</span>
                            </td>
                        </tr>

                        <tr ng-show="(candidatePreview.contacts|filter:type = 'mphone').length > 0">
                            <td class="content-header"><i class="fa fa-phone" aria-hidden="true"></i></td>
                            <td class="item-in-table" style=" padding: 0.5em 0.3em">
                                <div ng-repeat=" contact in candidatePreview.contacts|filter:type = 'mphone'">
                                    {{contact.value}}
                                </div>
                            </td>
                        </tr>
                        <tr ng-show="(candidatePreview.contacts|filter:type = 'email').length > 0">
                            <td class="content-header"><i class="fa fa-envelope" aria-hidden="true"></i></td>
                            <td class="item-in-table" style=" padding: 0.5em 0.3em">
                                <div ng-repeat="contact in candidatePreview.contacts|filter:type = 'email'">
                                    <a href="mailto:{{contact.value}}">
                                        {{contact.value}}
                                    </a>
                                </div>
                            </td>
                        </tr>
                        <tr ng-show="(candidatePreview.contacts|filter:type = 'skype').length > 0">
                            <td class="content-header"><i class="fa fa-skype" aria-hidden="true"></i> </td>
                            <td class="item-in-table" style=" padding: 0.5em 0.3em">
                                <div ng-repeat=" contact in candidatePreview.contacts|filter:type = 'Skype'">
                                    {{contact.value}}
                                </div>
                            </td>
                        </tr>
                        <tr ng-show="(candidatePreview.contacts|filter:type = 'linkedin').length > 0">
                            <td class="content-header"><i class="fa fa-linkedin" aria-hidden="true"></i></td>
                            <td class="item-in-table" style=" padding: 0.5em 0.3em">
                                <div ng-repeat="contact in candidatePreview.contacts|filter:type = 'linkedin'">
                                    <a target="_blank" href="{{contact.value}}">{{contact.value|cut:true:30}}</a>
                                </div>
                            </td>
                        </tr>
                        <tr ng-show="(candidatePreview.contacts|filter:type = 'facebook').length > 0">
                            <td class="content-header"><i class="fa fa-facebook" aria-hidden="true"></i></td>
                            <td class="item-in-table" style=" padding: 0.5em 0.3em">
                                <div ng-repeat="contact in candidatePreview.contacts|filter:type = 'facebook'">
                                    <a target="_blank" href="{{contact.value}}">{{contact.value|cut:true:30}}</a>
                                </div>
                            </td>
                        </tr>
                        <tr ng-show="(candidatePreview.contacts|filter:type = 'googleplus').length > 0">
                            <td class="content-header"><i class="fa fa-google-plus" aria-hidden="true"></i></td>
                            <td class="item-in-table" style=" padding: 0.5em 0.3em">
                                <div ng-repeat="contact in candidatePreview.contacts|filter:type = 'googleplus'">
                                    <a target="_blank" href="{{contact.value}}">{{contact.value|cut:true:30}}</a>
                                </div>
                            </td>
                        </tr>
                        <tr ng-show="(candidatePreview.contacts|filter:type = 'homepage').length > 0">
                            <td class="content-header"><i class="fa fa-home" aria-hidden="true"></i></td>
                            <td class="item-in-table" style=" padding: 0.5em 0.3em;word-break: break-word;">
                                <div ng-repeat="contact in candidatePreview.contacts|filter:type = 'homepage'">
                                    <a target="_blank" href="{{contact.value}}">{{contact.value|cut:true:30}}</a>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>

                    <div style="margin-left: 27%;margin-top: 14%;" ng-show="$root.previewInfoIsMissing">Информация
                        отсутствует
                    </div>
                </div>


            </div>
            <div class="ui vertically-divided-grid ">
                <div class="sixteen wide column">
                    <div class="ui feed ">
                        <ng-include src="'partials/activity/preview_candidate.html'"></ng-include>
                    </div>
                </div>
            </div>


        </div>
    </div>
    <div class="ui bottom attached segment red"
         style="padding: 6px 6px 3px 6px;border-top: 0.2em solid #FFFFFF !important;"
         ng-show="candidatePreview.showDocument">
        <div ng-show="$index == currentDocPreviewPage" ng-repeat="file in candidatePreview.files" style="position: relative;">
            <i ng-show="currentDocPreviewPage > 0" class="fa fa-angle-left prevDoc" aria-hidden="true" ng-click="prevDoc()"></i>
            <i ng-show="!$last" class="fa fa-angle-right nextDoc" aria-hidden="true" ng-click="nextDoc()"></i>
            <iframe ng-src="{{file.linkFileForShow}}" frameborder="0" style="width: 100%; height: 400px;"></iframe>
        </div>
    </div>
    <div id="scrollup"><img alt="Прокрутить вверх" src="/images/sprite/up_racket.png"></div>
</div>
