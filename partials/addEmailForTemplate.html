<div class="block-integration-with-email">
    <div class="row integration-with-email">
        <div class="col-lg-12 fullName-position">
            <span>{{'Integration with email' | translate}}</span>
            <div class="button" ng-show="!showAddEmail && !editEmail">
                <a type="button" class="btn btn-primary" ng-click="showAddEmail = true;setDefault();">{{'Add Email' | translate}}</a>
            </div>
            <!--<p>Следующая проверка через <span>23 минуты</span></p>-->
        </div>
        <div class="col-lg-12 firstTable" ng-show="!showAddEmail && !editEmail">
            <div class="row bodies">
                <table class="table" ng-show="emails.length">
                    <tbody>
                    <tr ng-click="showEditeTemplateModal(email)" ng-repeat="email in emails track by $index">
                        <td class="mailAndData">
                            <a>{{email.email}}</a><span>, {{email.dc|dateFormat:false}}</span>
                        </td>
                        <td class="settingsForUsers">
                            <div>
                                    <span>
                                        {{'Email Access1'|translate}} -
                                        <span ng-show="email.permitParsing" class="yes">{{'yes'|translate}}</span>
                                        <span ng-show="!email.permitParsing" class="no">{{'no'|translate}}</span>
                                    </span>
                            </div>
                            <div>
                                    <span>
                                        {{'Email Access3'|translate}} -
                                        <span ng-show="email.permitSend" class="yes">{{'yes'|translate}}</span>
                                        <span ng-show="!email.permitSend" class="no">{{'no'|translate}}</span>
                                    </span>
                            </div>
                            <div class="error" ng-if="email.status === 'incorrect_password'">{{'incorrect_password_integration'| translate}}</div>
                        </td>
                        <td class="howMuchResumes">
                                <span>
                                    {{'CVs added'|translate}} {{email.resumeCount}}<span ng-show="email.lastResumeDate">|</span><span class="grey">{{email.lastResumeDate| dateFormat2:false}}</span>
                                </span>
                        </td>
                        <td class="editIntegrationAddress">
                            <a title="{{'Change integration settings'|translate}}">
                                {{'Edit' | translate}}
                                <i class="fa fa-pencil" aria-hidden="true"></i>
                            </a>
                        </td>
                        <td class="editIntegrationAddress" ng-click="showRemoveEmail(email);$event.stopPropagation();"  title="{{'Edit'|translate}}">
                            <a title="{{'Cancel integration'|translate}}" href="">
                                <i class="fa fa-times" aria-hidden="true"></i>
                            </a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="container add-email">
           <form class="form-signin" ng-show="showAddEmail || editEmail" ng-init="obj={checkFields: false}">
               <h5 ng-show="showPassword">{{addedEmail.email}}</h5>
               <input class="form-control" ng-class="{'wrong-email': wrongEmail}" ng-click="wrongEmail = false" ng-show="!showPassword && !$root.showAdvancedFields" type="text" name="email" ng-model="addedEmail.email" click-on-enter="#addEmailButton .next-step" placeholder="E-mail address">
               <div class="text-center wrong-email-notification" ng-show="wrongEmail">{{'wrong_email' | translate}}</div>
               <input class="form-control" ng-if="showPassword" autocomplete="off" ng-class="{'wrong-email': (obj.checkFields && !$root.addedEmail.password)}" type="password" ng-model="addedEmail.password" click-on-enter="#addEmailButton .next-step" name="password" placeholder="Password" ng-focus="obj.checkFields = false">
               <div class="text-center wrong-email-notification" ng-show="!$root.addedEmail.password && obj.checkFields && showPassword">{{'Please enter your password' | translate}}</div>
               <input class="form-control" ng-if="$root.showAdvancedFields" ng-class="{'wrong-email': (obj.checkFields && !$root.addedEmail.smtp.host)}" type="text" ng-model="$root.addedEmail.smtp.host" name="smtpHost" click-on-enter="#addEmailButton .next-step" placeholder="smtp Host" ng-focus="obj.checkFields = false">
               <div class="text-center wrong-email-notification" ng-show="!$root.addedEmail.smtp.host && obj.checkFields && showPassword">{{'Please fill in this field' | translate}}</div>
               <input class="form-control" ng-if="$root.showAdvancedFields" ng-class="{'wrong-email': (obj.checkFields && !$root.addedEmail.smtp.port)}" type="number" ng-model="$root.addedEmail.smtp.port" name="smtpPort" click-on-enter="#addEmailButton .next-step" placeholder="smtp Port" ng-focus="obj.checkFields = false">
               <div class="text-center wrong-email-notification" ng-show="!$root.addedEmail.smtp.port && obj.checkFields && showPassword">{{'Please fill in this field' | translate}}</div>
               <div class="buttons" ng-show="$root.showAdvancedFields">
                   <button type="button" class="btn btn-secondary" ng-class="{'active': $root.addedEmail.smtp.secure == 'SSL'}" ng-click="$root.addedEmail.smtp.secure = 'SSL'">SSL</button>
                   <button type="button" class="btn btn-secondary" ng-class="{'active': $root.addedEmail.smtp.secure == 'TLS'}" ng-click="$root.addedEmail.smtp.secure = 'TLS'">TLS</button>
               </div>
               <div class="buttons text-center" id="addEmailButton">
                   <button class="btn btn-lg btn-default" ng-click="showAddEmail = false;">{{'Back' | translate}}</button>
                   <button class="btn btn-lg btn-primary next-step" ng-click="addEmail()" ng-if="($root.addedEmail.password && $root.addedEmail.smtp.host && $root.addedEmail.smtp.port) || !showPassword">
                       <span ng-show="!showPassword && !$root.showAdvancedFields">{{'Next' | translate}}</span>
                       <span ng-show="showPassword" >{{'Add Email' | translate}}</span>
                   </button>
                   <button class="btn btn-lg btn-primary next-step" ng-if="(!$root.addedEmail.password || !$root.addedEmail.smtp.host || !$root.addedEmail.smtp.port) && showPassword" ng-click="obj.checkFields = true">
                       <span >{{'Add Email' | translate}}</span>
                   </button>
               </div>
           </form>
        </div>
    </div>
</div>